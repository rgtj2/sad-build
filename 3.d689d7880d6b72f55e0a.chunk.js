webpackJsonp([3],{iVOx:function(l,n,u){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var t=u("LMZF"),i=function(){},e=u("0nO6"),o=u("Un6q"),a=u("bbjE"),s=u("l6fg"),r=u("fc36"),c=u("CKDn"),d=u("zGIg"),_=u("aMQu"),g=u("UHIZ"),m=function(){function l(l,n,u,t,i,e){this.loginService=l,this.formBuilder=n,this.appState=u,this.stellarAccountGenerator=t,this.networkEnvironment=i,this.router=e}return l.prototype.ngOnInit=function(){console.log(this.formBuilder,this),this.loginMethod="accountFile",this.fileReadUpdates=null,this.fileLoginForm=this.formBuilder.group({accountAlias:[null,e.m.required],accountFilePassword:[null,e.m.required],rawAccountFile:[null,e.m.required]}),this.newStellarForm=this.formBuilder.group({accountAlias:[null,e.m.required],accountFilePassword:[null,e.m.required]})},l.prototype.ngOnDestroy=function(){this.resetFileReadUpdates()},l.prototype.onFileSelect=function(l){this.fileLoginForm.patchValue({rawAccountFile:l.srcElement.files[0]}),this.fileFormSubmitButton.nativeElement.focus()},l.prototype.submitFileForm=function(l){var n=l.value;l.valid&&this.readAccountMasterFile(n.accountAlias,n.rawAccountFile,n.accountFilePassword)},l.prototype.submitNewStellarForm=function(l){var n=this;if(l.valid&&"NetworkConfigError"!==this.networkEnvironment.horizonConfig){var u=l.value,t=this.stellarAccountGenerator.generateKeypair(),i=this.networkEnvironment.horizonConfig;this.loginService.loginWithStellarKeypair(u.accountAlias,t,i).subscribe(function(l){if("InvalidAccount"!==l){var t=new a.a([{stellarAccountConfig:{publicKey:l.stellarAccount.publicKey,secret:l.stellarAccount.secret},networkConfig:{url:i.url,passphrase:i.networkPassphrase},alias:u.accountAlias,twoFactorConfig:null}],u.accountFilePassword),e=new s.a(t);n.appState.userState.next(e),n.router.navigate(["/"])}})}},l.prototype.resetFileReadUpdates=function(){null!==this.fileReadUpdates&&this.fileReadUpdates.unsubscribe(),this.fileReadUpdates=null},l.prototype.readAccountMasterFile=function(l,n,u){var t=this;this.resetFileReadUpdates(),this.fileReadUpdates=this.loginService.loginWithFileAndPassword(l,u,n).subscribe(function(l){l instanceof s.a&&(t.appState.userState.next(l),t.appState.authState.next("authorized"),t.router.navigate(["/"]))})},l}(),p=t._1({encapsulation:0,styles:[[".sad-login-form[_ngcontent-%COMP%]{max-width:20em;background-color:#e1e4d5;padding:.5em 1em;margin-top:.5em}.sad-form-input[_ngcontent-%COMP%], .sad-link-container[_ngcontent-%COMP%]{margin:.25em;height:1.5em}form[_ngcontent-%COMP%]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column}.sad-submit-button[_ngcontent-%COMP%]{padding:.5em;border:1px solid #ddd;background-color:#999;color:#fff}.sad-login-form-title[_ngcontent-%COMP%]{color:green;font-weight:700;font-size:1.5em}.sad-link-container[_ngcontent-%COMP%]{display:-webkit-box;display:-ms-flexbox;display:flex;text-align:center;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;font-size:.85em;margin:1em}.sad-default-link[_ngcontent-%COMP%]{color:blue;padding-top:.25rem;cursor:pointer}.sad-default-link[_ngcontent-%COMP%]:hover{color:#789}.valid-button[_ngcontent-%COMP%]{cursor:pointer;background-color:green;color:#90ee90;font-weight:600}"]],data:{}});function f(l){return t._25(0,[(l()(),t._3(0,0,null,null,54,"form",[["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngSubmit"],[null,"submit"],[null,"reset"]],function(l,n,u){var i=!0,e=l.component;return"submit"===n&&(i=!1!==t._14(l,2).onSubmit(u)&&i),"reset"===n&&(i=!1!==t._14(l,2).onReset()&&i),"ngSubmit"===n&&(i=!1!==e.submitFileForm(e.fileLoginForm)&&i),i},null,null)),t._2(1,16384,null,0,e.o,[],null,null),t._2(2,540672,null,0,e.f,[[8,null],[8,null]],{form:[0,"form"]},{ngSubmit:"ngSubmit"}),t._20(2048,null,e.b,null,[e.f]),t._2(4,16384,null,0,e.k,[e.b],null,null),(l()(),t._23(-1,null,["\n            "])),(l()(),t._3(6,0,null,null,1,"div",[["class","sad-login-form-title"]],null,null,null,null,null)),(l()(),t._23(-1,null,["Login"])),(l()(),t._23(-1,null,["\n            "])),(l()(),t._3(9,0,null,null,8,"div",[["class","sad-form-input"]],null,null,null,null,null)),(l()(),t._23(-1,null,["\n                "])),(l()(),t._3(11,0,null,null,5,"input",[["formControlName","accountAlias"],["placeholder","Account Nickname"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(l,n,u){var i=!0;return"input"===n&&(i=!1!==t._14(l,12)._handleInput(u.target.value)&&i),"blur"===n&&(i=!1!==t._14(l,12).onTouched()&&i),"compositionstart"===n&&(i=!1!==t._14(l,12)._compositionStart()&&i),"compositionend"===n&&(i=!1!==t._14(l,12)._compositionEnd(u.target.value)&&i),i},null,null)),t._2(12,16384,null,0,e.c,[t.B,t.k,[2,e.a]],null,null),t._20(1024,null,e.h,function(l){return[l]},[e.c]),t._2(14,671744,null,0,e.e,[[3,e.b],[8,null],[8,null],[2,e.h]],{name:[0,"name"]},null),t._20(2048,null,e.i,null,[e.e]),t._2(16,16384,null,0,e.j,[e.i],null,null),(l()(),t._23(-1,null,["\n            "])),(l()(),t._23(-1,null,["\n            "])),(l()(),t._3(19,0,null,null,8,"div",[["class","sad-form-input"]],null,null,null,null,null)),(l()(),t._23(-1,null,["\n                "])),(l()(),t._3(21,0,null,null,5,"input",[["formControlName","accountFilePassword"],["placeholder","Secret"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(l,n,u){var i=!0;return"input"===n&&(i=!1!==t._14(l,22)._handleInput(u.target.value)&&i),"blur"===n&&(i=!1!==t._14(l,22).onTouched()&&i),"compositionstart"===n&&(i=!1!==t._14(l,22)._compositionStart()&&i),"compositionend"===n&&(i=!1!==t._14(l,22)._compositionEnd(u.target.value)&&i),i},null,null)),t._2(22,16384,null,0,e.c,[t.B,t.k,[2,e.a]],null,null),t._20(1024,null,e.h,function(l){return[l]},[e.c]),t._2(24,671744,null,0,e.e,[[3,e.b],[8,null],[8,null],[2,e.h]],{name:[0,"name"]},null),t._20(2048,null,e.i,null,[e.e]),t._2(26,16384,null,0,e.j,[e.i],null,null),(l()(),t._23(-1,null,["\n            "])),(l()(),t._23(-1,null,["\n            "])),(l()(),t._23(-1,null,["\n            "])),(l()(),t._3(30,0,null,null,3,"div",[["class","sad-form-input"]],null,null,null,null,null)),(l()(),t._23(-1,null,["\n                "])),(l()(),t._3(32,0,null,null,0,"input",[["type","file"]],null,[[null,"change"]],function(l,n,u){var t=!0;return"change"===n&&(t=!1!==l.component.onFileSelect(u)&&t),t},null,null)),(l()(),t._23(-1,null,["\n            "])),(l()(),t._23(-1,null,["\n            "])),(l()(),t._3(35,0,null,null,4,"div",[["class","sad-submit-container"]],null,null,null,null,null)),(l()(),t._23(-1,null,["\n                "])),(l()(),t._3(37,0,[[1,0],["fileSubmit",1]],null,1,"button",[["class","sad-submit-button"],["type","submit"]],[[2,"valid-button",null]],null,null,null,null)),(l()(),t._23(-1,null,["Login"])),(l()(),t._23(-1,null,["\n            "])),(l()(),t._23(-1,null,["\n            "])),(l()(),t._3(41,0,null,null,12,"div",[["class","sad-link-container"]],null,null,null,null,null)),(l()(),t._23(-1,null,["\n                "])),(l()(),t._3(43,0,null,null,1,"span",[],null,null,null,null,null)),(l()(),t._23(-1,null,["Need an account?"])),(l()(),t._23(-1,null,["\n\n                "])),(l()(),t._3(46,0,null,null,6,"a",[["class","sad-default-link sad-login-form-switcher"]],null,[[null,"click"]],function(l,n,u){var t=!0;return"click"===n&&(t=!1!==(l.component.loginMethod="stellarKeypair")&&t),t},null,null)),(l()(),t._23(-1,null,["\n                    "])),(l()(),t._3(48,0,null,null,0,"i",[["class","fas fa-user-plus"]],null,null,null,null,null)),(l()(),t._23(-1,null,["\n                    "])),(l()(),t._3(50,0,null,null,1,"span",[],null,null,null,null,null)),(l()(),t._23(-1,null,["Create New Stellar Keypair"])),(l()(),t._23(-1,null,["\n                "])),(l()(),t._23(-1,null,["\n            "])),(l()(),t._23(-1,null,["\n        "]))],function(l,n){l(n,2,0,n.component.fileLoginForm),l(n,14,0,"accountAlias"),l(n,24,0,"accountFilePassword")},function(l,n){var u=n.component;l(n,0,0,t._14(n,4).ngClassUntouched,t._14(n,4).ngClassTouched,t._14(n,4).ngClassPristine,t._14(n,4).ngClassDirty,t._14(n,4).ngClassValid,t._14(n,4).ngClassInvalid,t._14(n,4).ngClassPending),l(n,11,0,t._14(n,16).ngClassUntouched,t._14(n,16).ngClassTouched,t._14(n,16).ngClassPristine,t._14(n,16).ngClassDirty,t._14(n,16).ngClassValid,t._14(n,16).ngClassInvalid,t._14(n,16).ngClassPending),l(n,21,0,t._14(n,26).ngClassUntouched,t._14(n,26).ngClassTouched,t._14(n,26).ngClassPristine,t._14(n,26).ngClassDirty,t._14(n,26).ngClassValid,t._14(n,26).ngClassInvalid,t._14(n,26).ngClassPending),l(n,37,0,u.fileLoginForm.valid)})}function h(l){return t._25(0,[(l()(),t._23(-1,null,["\n            "])),(l()(),t._3(1,0,null,null,49,"form",[["class","sad-form"],["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngSubmit"],[null,"submit"],[null,"reset"]],function(l,n,u){var i=!0,e=l.component;return"submit"===n&&(i=!1!==t._14(l,3).onSubmit(u)&&i),"reset"===n&&(i=!1!==t._14(l,3).onReset()&&i),"ngSubmit"===n&&(i=!1!==e.submitNewStellarForm(e.newStellarForm)&&i),i},null,null)),t._2(2,16384,null,0,e.o,[],null,null),t._2(3,540672,null,0,e.f,[[8,null],[8,null]],{form:[0,"form"]},{ngSubmit:"ngSubmit"}),t._20(2048,null,e.b,null,[e.f]),t._2(5,16384,null,0,e.k,[e.b],null,null),(l()(),t._23(-1,null,["\n                "])),(l()(),t._3(7,0,null,null,1,"div",[["class","sad-login-form-title"]],null,null,null,null,null)),(l()(),t._23(-1,null,["Create Account"])),(l()(),t._23(-1,null,["\n                "])),(l()(),t._3(10,0,null,null,8,"div",[["class","sad-form-input"]],null,null,null,null,null)),(l()(),t._23(-1,null,["\n                    "])),(l()(),t._3(12,0,null,null,5,"input",[["formControlName","accountAlias"],["placeholder","Account Nickname"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(l,n,u){var i=!0;return"input"===n&&(i=!1!==t._14(l,13)._handleInput(u.target.value)&&i),"blur"===n&&(i=!1!==t._14(l,13).onTouched()&&i),"compositionstart"===n&&(i=!1!==t._14(l,13)._compositionStart()&&i),"compositionend"===n&&(i=!1!==t._14(l,13)._compositionEnd(u.target.value)&&i),i},null,null)),t._2(13,16384,null,0,e.c,[t.B,t.k,[2,e.a]],null,null),t._20(1024,null,e.h,function(l){return[l]},[e.c]),t._2(15,671744,null,0,e.e,[[3,e.b],[8,null],[8,null],[2,e.h]],{name:[0,"name"]},null),t._20(2048,null,e.i,null,[e.e]),t._2(17,16384,null,0,e.j,[e.i],null,null),(l()(),t._23(-1,null,["\n                "])),(l()(),t._23(-1,null,["\n                "])),(l()(),t._3(20,0,null,null,8,"div",[["class","sad-form-input"]],null,null,null,null,null)),(l()(),t._23(-1,null,["\n                    "])),(l()(),t._3(22,0,null,null,5,"input",[["formControlName","accountFilePassword"],["placeholder","Secret"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(l,n,u){var i=!0;return"input"===n&&(i=!1!==t._14(l,23)._handleInput(u.target.value)&&i),"blur"===n&&(i=!1!==t._14(l,23).onTouched()&&i),"compositionstart"===n&&(i=!1!==t._14(l,23)._compositionStart()&&i),"compositionend"===n&&(i=!1!==t._14(l,23)._compositionEnd(u.target.value)&&i),i},null,null)),t._2(23,16384,null,0,e.c,[t.B,t.k,[2,e.a]],null,null),t._20(1024,null,e.h,function(l){return[l]},[e.c]),t._2(25,671744,null,0,e.e,[[3,e.b],[8,null],[8,null],[2,e.h]],{name:[0,"name"]},null),t._20(2048,null,e.i,null,[e.e]),t._2(27,16384,null,0,e.j,[e.i],null,null),(l()(),t._23(-1,null,["\n                "])),(l()(),t._23(-1,null,["\n                "])),(l()(),t._23(-1,null,["\n                "])),(l()(),t._3(31,0,null,null,4,"div",[["class","sad-submit-container"]],null,null,null,null,null)),(l()(),t._23(-1,null,["\n                    "])),(l()(),t._3(33,0,null,null,1,"button",[["class","sad-submit-button"],["type","submit"]],[[2,"valid-button",null]],null,null,null,null)),(l()(),t._23(-1,null,["Create Account"])),(l()(),t._23(-1,null,["\n                "])),(l()(),t._23(-1,null,["\n                "])),(l()(),t._3(37,0,null,null,12,"div",[["class","sad-link-container"]],null,null,null,null,null)),(l()(),t._23(-1,null,["\n                    "])),(l()(),t._3(39,0,null,null,1,"span",[],null,null,null,null,null)),(l()(),t._23(-1,null,["Already have an account?"])),(l()(),t._23(-1,null,["\n                    "])),(l()(),t._3(42,0,null,null,6,"a",[["class","sad-default-link sad-login-form-switcher"]],null,[[null,"click"]],function(l,n,u){var t=!0;return"click"===n&&(t=!1!==(l.component.loginMethod="accountFile")&&t),t},null,null)),(l()(),t._23(-1,null,["\n                        "])),(l()(),t._3(44,0,null,null,0,"i",[["class","fas fa-sign-in-alt"]],null,null,null,null,null)),(l()(),t._23(-1,null,["\n                        "])),(l()(),t._3(46,0,null,null,1,"span",[],null,null,null,null,null)),(l()(),t._23(-1,null,["Login with Account File"])),(l()(),t._23(-1,null,["\n                    "])),(l()(),t._23(-1,null,["\n                "])),(l()(),t._23(-1,null,["\n            "])),(l()(),t._23(-1,null,["\n        "]))],function(l,n){l(n,3,0,n.component.newStellarForm),l(n,15,0,"accountAlias"),l(n,25,0,"accountFilePassword")},function(l,n){var u=n.component;l(n,1,0,t._14(n,5).ngClassUntouched,t._14(n,5).ngClassTouched,t._14(n,5).ngClassPristine,t._14(n,5).ngClassDirty,t._14(n,5).ngClassValid,t._14(n,5).ngClassInvalid,t._14(n,5).ngClassPending),l(n,12,0,t._14(n,17).ngClassUntouched,t._14(n,17).ngClassTouched,t._14(n,17).ngClassPristine,t._14(n,17).ngClassDirty,t._14(n,17).ngClassValid,t._14(n,17).ngClassInvalid,t._14(n,17).ngClassPending),l(n,22,0,t._14(n,27).ngClassUntouched,t._14(n,27).ngClassTouched,t._14(n,27).ngClassPristine,t._14(n,27).ngClassDirty,t._14(n,27).ngClassValid,t._14(n,27).ngClassInvalid,t._14(n,27).ngClassPending),l(n,33,0,u.newStellarForm.valid)})}function v(l){return t._25(0,[t._21(671088640,1,{fileFormSubmitButton:0}),(l()(),t._3(1,0,null,null,9,"div",[["class","sad-login-form"]],null,null,null,null,null)),(l()(),t._23(-1,null,["\n    "])),(l()(),t._3(3,0,null,null,6,"div",[["class","sad-login-form-container"]],null,null,null,null,null)),(l()(),t._23(-1,null,["\n        "])),(l()(),t.Y(16777216,null,null,1,null,f)),t._2(6,16384,null,0,o.k,[t.M,t.J],{ngIf:[0,"ngIf"],ngIfElse:[1,"ngIfElse"]},null),(l()(),t._23(-1,null,["\n\n        "])),(l()(),t.Y(0,[["newAccount",2]],null,0,null,h)),(l()(),t._23(-1,null,["\n    "])),(l()(),t._23(-1,null,["\n"]))],function(l,n){l(n,6,0,"accountFile"===n.component.loginMethod,t._14(n,8))},null)}var b=t.Z("app-login-form",m,function(l){return t._25(0,[(l()(),t._3(0,0,null,null,1,"app-login-form",[],null,null,null,v,p)),t._2(1,245760,null,0,m,[c.a,e.d,r.a,_.a,d.a,g.k],null,null)],function(l,n){l(n,1,0)},null)},{},{},[]),C=function(){function l(l,n){this.appState=l,this.router=n}return l.prototype.canActivate=function(l){return"none"===this.appState.userState.value?(this.router.navigate(["/login/start"]),!1):(this.appState.authState.next("unauthorized"),this.appState.userState.next("none"),this.router.navigate(["/login/start"]),!1)},l}(),S=function(){};u.d(n,"LoginModuleNgFactory",function(){return w});var w=t._0(i,[],function(l){return t._11([t._12(512,t.j,t.W,[[8,[b]],[3,t.j],t.v]),t._12(4608,o.m,o.l,[t.s,[2,o.u]]),t._12(4608,e.p,e.p,[]),t._12(4608,e.d,e.d,[]),t._12(4608,C,C,[r.a,g.k]),t._12(512,o.b,o.b,[]),t._12(512,e.n,e.n,[]),t._12(512,e.g,e.g,[]),t._12(512,e.l,e.l,[]),t._12(512,g.n,g.n,[[2,g.s],[2,g.k]]),t._12(512,S,S,[]),t._12(512,i,i,[]),t._12(1024,g.i,function(){return[[{path:"start",component:m},{path:"end",canActivate:[C]},{path:"",redirectTo:"start",pathMatch:"full"}]]},[])])})}});